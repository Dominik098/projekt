<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ page import="java.sql.*" %>
<%
// Przykładowa logika biznesowa - pobieranie danych z bazy danych i przypisywanie do atrybutów sesji
try {
    // Ustawienia połączenia z bazą danych
    String dbURL = "jdbc:mysql://localhost:3306/logowanie";
    String dbUser = "root";
    String dbPassword = "P@ssw0rd";

    // Nawiązanie połączenia z bazą danych
    Class.forName("com.mysql.jdbc.Driver");
    Connection connection = DriverManager.getConnection(dbURL, dbUser, dbPassword);

    // Pobranie danych z bazy danych
    String query = "SELECT imie, nazwisko, admin, email FROM users WHERE id = ?";
    PreparedStatement statement = connection.prepareStatement(query);
    pst.setString(1, id); // Zamiast userId, podaj właściwą wartość identyfikatora użytkownika

    ResultSet resultSet = statement.executeQuery();

    if (resultSet.next()) {
        // Przypisanie danych do atrybutów sesji
        session.setAttribute("Aimie", resultSet.getString("imie"));
        session.setAttribute("Anazwisko", resultSet.getString("nazwisko"));
        session.setAttribute("administrator", resultSet.getString("rola"));
        session.setAttribute("email-login", resultSet.getString("email"));
    }

    // Zamknięcie zasobów
    resultSet.close();
    statement.close();
    connection.close();
} catch (Exception e) {
    e.printStackTrace();
}
%>

<!DOCTYPE html>
<html>
<head>
  <title>Informacje o użytkowniku</title>
  <link rel="stylesheet" type="text/css" href="info_uz.css">
</head>
<body>
  <div class="container">
    <h1>Informacje o użytkowniku</h1>
    <div class="user-info">
      <div class="user-details">
        <h2>Imię: <%=session.getAttribute("Aimie") %></h2>
        <h2>Nazwisko: <%=session.getAttribute("Anazwisko") %></h2>
        <p>Rola: <%=session.getAttribute("administrator") %></p>
        <p>Email: <%=session.getAttribute("email-login") %></p>
        <p>Hasło: <%=session.getAttribute("haslo-login") %></p>
        
      </div>
    </div>
  </div>
</body>
</html>
