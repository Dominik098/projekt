protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		
	String email = request.getParameter("email-login");
	String password = request.getParameter("haslo-login");
	String hashedPassword = null;
	HttpSession session = request.getSession();
	RequestDispatcher dispatcher = null;
	boolean isAdmin = false;
		
	try {
	    MessageDigest digest = MessageDigest.getInstance("SHA-256");
	    byte[] hash = digest.digest(password.getBytes(StandardCharsets.UTF_8));
	    hashedPassword = Base64.getEncoder().encodeToString(hash);
	} catch (NoSuchAlgorithmException e) {
	    e.printStackTrace();
	}
		
	try 
	{
		Class.forName("com.mysql.cj.jdbc.Driver");
		Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/logowanie","root","P@ssw0rd");
		
		// check if the user is an admin
		PreparedStatement pst = con.prepareStatement("select * from admin where email = ? and password = ? ");
		pst.setString(1, email);
		pst.setString(2, hashedPassword);
		ResultSet rs = pst.executeQuery();
		
		if(rs.next())
		{
			isAdmin = true;
			session.setAttribute("email-login", rs.getString("email"));
			dispatcher = request.getRequestDispatcher("A_strona-gl.jsp");
		} 
		else 
		{
			// check if the user is a regular user
			pst = con.prepareStatement("select * from users where email = ? and password = ? ");
			pst.setString(1, email);
			pst.setString(2, hashedPassword);
			rs = pst.executeQuery();
			if(rs.next())
			{
				session.setAttribute("email-login", rs.getString("email"));
				dispatcher = request.getRequestDispatcher("U_strona-gl.jsp");
			}
			else 
			{
				request.setAttribute("status", "failed");
				dispatcher = request.getRequestDispatcher("G_login.jsp");
			}
		}
		
		dispatcher.forward(request, response);
			
	}
	catch(Exception e)
	{
		e.printStackTrace();
	}
}
